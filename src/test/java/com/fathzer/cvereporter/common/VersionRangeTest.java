package com.fathzer.cvereporter.common;

import static org.junit.jupiter.api.Assertions.*;

import java.io.IOException;

import org.junit.jupiter.api.Test;

import com.fasterxml.jackson.databind.ObjectMapper;

class VersionRangeTest {

	@Test
	void test() {
		VersionRange r = new VersionRange("[3.2-alpha0,3.2.1.RELEASE],[3.1-alpha0,3.1.5.RELEASE]");
		assertTrue (r.contains(new Version("3.2.0")));
		assertTrue (r.contains(new Version("3.1.3")));
		final VersionRange other = new VersionRange("[3.1-alpha0,3.1.5.RELEASE],[3.2-alpha0,3.2.1.RELEASE]");
		assertEquals(other.hashCode(),r.hashCode());
		assertEquals(other,r);
	}

	@Test
	void testSerialization() throws IOException {
		final ObjectMapper mapper = new ObjectMapper();
		final VersionRange r = new VersionRange("[3.2-alpha0,3.2.1.RELEASE],[3.1-alpha0,3.1.5.RELEASE]");
		final String json = mapper.writeValueAsString(r);
		VersionRange v = mapper.readValue(json, VersionRange.class);
		assertEquals("[3.1-alpha0,3.1.5.RELEASE],[3.2-alpha0,3.2.1.RELEASE]",v.toString());
	}
}
