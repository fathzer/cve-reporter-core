package com.fathzer.cvereporter.common;

import static org.junit.jupiter.api.Assertions.*;

import java.io.IOException;

import org.junit.jupiter.api.Test;

import com.fasterxml.jackson.databind.ObjectMapper;

import lombok.Getter;

class VersionTest {
	@Test
	void testSerialization() throws IOException {
		final ObjectMapper mapper = new ObjectMapper();
		final Version original = new Version("1.0");
		final String json = mapper.writeValueAsString(original);
		Version v = mapper.readValue(json, Version.class);
		assertEquals("1.0",v.toString());
		assertEquals(original, v);
		assertEquals(original.hashCode(), v.hashCode());
		
		final Version b = new Version("1.0") {
			@Getter
			private String other = "other";
		};
		final String json2 = mapper.writeValueAsString(b);
		assertNotEquals(json, json2);
		assertEquals(original, mapper.readValue(json2, Version.class));
	}
	
	@Test
	void test() {
		assertThrows(NullPointerException.class, () -> new Version(null));
	}
}
