import static org.junit.jupiter.api.Assertions.*;

import java.io.IOException;
import java.nio.file.NoSuchFileException;
import java.nio.file.Path;
import java.nio.file.Paths;

import org.junit.jupiter.api.Test;

import com.fathzer.cvereporter.Project;
import com.fathzer.cvereporter.repository.LocalRepository;

class LocalRepositoryTest {
	private static final String POM_XML = "pom.xml";
	
	public static final Path REPO_PATH = Paths.get("src/test/resources/projects");
	
	@Test
	void test() throws IOException {
		final LocalRepository repo = new LocalRepository(REPO_PATH);
		assertEquals(2, repo.getProjects().size());
		
		assertEquals(705, repo.getFile(new Project(0, "p1"), POM_XML).length());
		
		assertThrows(NoSuchFileException.class, () -> repo.getFile(new Project(0, "p2"), POM_XML));
	}
}
